<style type="text/css">
@import url(https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css);@import url(https://fonts.googleapis.com/css?family=Didact+Gothic|Ubuntu:300,400,500,700|Josefin+Sans:100,300,400,600,700|Poiret+One|Questrial|Roboto:100,200,300,400,500,600,700,800,900&display=swap);*,::after,::before{margin:0;padding:0;box-sizing:border-box;font-family:Roboto}:root{--width:calc(100vw/4 - 10px)}.pos-rel{position:relative}.pos-abs{position:absolute}.-inline_block{display:inline-block;vertical-align:middle}#game-over h3{color:#c50707}.high-scores>.-btn{text-align:center;padding:20px 0;background-color:#c50707;color:#fff;text-transform:uppercase;border-radius:5px;pointer-events:all;cursor:pointer}.high-scores>.-btn.-grayout{background-color:#d3d3d3;color:gray;pointer-events:none}.scores-table{width:100%}.game{box-shadow:0 1px 4px rgba(0,0,0,.5);padding:15px;background-color:#ffc7c4;border-radius:5px}.grid{display:grid;grid-template-columns:var(--width) var(--width) var(--width) var(--width);grid-template-rows:var(--width) var(--width) var(--width) var(--width);justify-content:center}.grid button{background-color:#000;color:#000;font-size:24px;font-weight:700;border:1px solid #ffc7c4;outline:0;cursor:pointer;background-position:center;background-size:contain;position:relative}.grid button span{z-index:1;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff}.grid button::after{content:'';width:30px;height:30px;border-radius:50%;background-color:#ffc7c420;position:absolute;z-index:0;left:50%;top:50%;transform:translate(-50%,-50%)}.footer{margin-top:15px;display:flex;justify-content:space-between}.footer button{border:none;font-size:20px;font-weight:700;border-radius:5px;box-shadow:0 1px 4px rgba(0,0,0,.5);padding:5px;width:80px;background-color:#c50707;color:#fff;outline:0;cursor:pointer}.footer button:hover{color:#c50707;background-color:#fff}.footer span{flex:1;text-align:center;font-size:20px;color:#c50707;font-weight:700;margin:auto 0}.message{color:#aa3939;height:80px;display:none}div.form-group{padding:10px 5px}input.form-control{width:100%;border:1px solid #c50707;border-radius:5px;padding:10px;height:auto;font-size:14px}input.form-control:focus{border:1px solid #c50707}div.custom{padding:5px;font-size:14px;background:#fff;box-shadow:0 2px 2px 0 rgba(0,0,0,.2);margin:10px}input[type=submit]{background:#c50707;color:#fff;box-shadow:0 0 .2em #ddd;padding:10px 20px;border-radius:5px;border:none;width:50%;font-size:14px;font-weight:700}.formDiv{display:none}.formDiv.active{display:block}.keyboard-line{width:100%;display:flex;flex-flow:row nowrap;justify-content:center;margin:2px 0}div.keyboard{background:#c50707}.keyboard-button{width:calc(100vw/10);height:calc(100vw/10);color:#fff;background:0 0;border:none;box-shadow:0 0 .1em rgba(0,0,0,.6);transition:.1s}button.space{width:50vw;display:block;padding:10px 34px;background:0 0;border:none;box-shadow:0 0 .1em rgba(0,0,0,.6);color:#fff}div.space-bar{color:#fff}.highlighted{animation:highlight .1s linear}@keyframes highlight{0%{background:rgba(0,0,0,.3)}50%{background:rgba(0,0,0,.6)}100%{background:rgba(0,0,0,.3)}}#playButton{animation:colorized .1s linear}@keyframes colorized{0%{font-weight:400}50%{font-weight:700}100%{font-weight:400}}.error{color:red;font-size:10px;display:none}.error.active{display:block}.scores-table{border:none;border-spacing:0}.scores-table>.-arrow_down,.scores-table>.-arrow_up{width:8px;height:8px;border-left:2px solid #000;border-top:2px solid #000;left:50%;transform:translateX(-50%) rotate(45deg)}.scores-table>.-arrow_down.-off,.scores-table>.-arrow_up.-off{display:none}.scores-table>.-arrow_up{top:16%}.scores-table>.-arrow_down{bottom:2%;transform:translateX(-50%) rotate(-135deg)}.scores-table .-table_body .-tr,.scores-table .-table_head .-tr{padding:5px 10px}.scores-table .-table_body .-tr .-td,.scores-table .-table_head .-tr .-td{text-align:left}.scores-table .-tr .-td.-number{width:10%}.scores-table .-tr .-td.-name{width:50%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.scores-table .-tr .-td.-moves,.scores-table .-tr .-td.-time{width:20%;text-align:right}.scores-table .-table_head{background:#ffc7c4;color:#c50707;font-weight:600}.scores-table .-table_body tr:nth-child(even){background:#f7f7f7}.scores-table .-table_body tr:first-child{color:#228b22;font-weight:700}.success{color:green;font-weight:700;font-style:italic}.backspace::after,.backspace::before,.uppercase::after,.uppercase::before{content:'';position:absolute}.backspace::before,.uppercase::before{width:8px;height:8px;background-color:transparent;border-top:2px solid #fff;border-left:2px solid #fff;top:40%;left:50%;transform:translate(-50%,-50%) rotate(45deg)}.backspace::after,.uppercase::after{width:2px;height:10px;background-color:#fff;top:48%;left:50%;transform:translate(-50%,-50%)}.backspace::before{transform:translate(-50%,-50%) rotate(-45deg);top:50%}.backspace::after{transform:translate(-50%,-50%) rotate(90deg);left:55%;top:50%}.-social_medias{text-align:center;margin:10px 0}.-social_medias>.-social_media{max-width:50px;height:50px;border-radius:50%;padding:8px;margin:0 5px}.-social_medias>.-social_media>img{width:100%}.-social_medias>.-social_media.-facebook{background-color:#3b579d}.-social_medias>.-social_media.-twitter{background-color:#23a3ff}#highScoresBody{height:200px;overflow-y:scroll}
</style>
<div class="-container"><div class="game"><div class="grid"> <button><span>1</span></button> <button><span>2</span></button> <button><span>3</span></button> <button><span>4</span></button> <button><span>5</span></button> <button><span>6</span></button> <button><span>7</span></button> <button><span>8</span></button> <button><span>9</span></button> <button><span>10</span></button> <button><span>11</span></button> <button><span>12</span></button> <button><span>13</span></button> <button><span>14</span></button> <button><span>15</span></button> <button></button></div><div class="footer"> <button>Play</button> <span id="move">Moves: 100</span> <span id="time">Time: 0</span></div></div><div class="-social_medias"><div class="-title -inline_block">share on social media</div> <a href="https://www.facebook.com/sharer.php?u=https://aal4.adj.st/ng/ss/jumia-games?adjust_t=itk4eyn_9sytz8o&adjust_campaign=NG&adjust_adgroup=CS-20&adjust_creative=GA_PAGE&adjust_deeplink=jumia%253A%252F%252Fng%252Fss%252Fjumia-games&adjust_redirect=https%253A%252F%252Fwww.jumia.com.ng%252Fjumia-games" class="-social_media -facebook -inline_block"> <img src="https://ng.jumia.is/cms/8-18/icons/facebook-icon.png" alt="facebook icon"/> </a><a href="https://twitter.com/intent/tweet?url=https://aal4.adj.st/ng/ss/jumia-games?adjust_t=itk4eyn_9sytz8o&adjust_campaign=NG&adjust_adgroup=CS-20&adjust_creative=GA_PAGE&adjust_deeplink=jumia%25253A%25252F%25252Fng%25252Fss%25252Fjumia-games&text=Jumia%20Puzzle&via=Jumia" class="-social_media -twitter -inline_block"> <img src="https://ng.jumia.is/cms/8-18/icons/twitter-icon.png" alt="twitter icon"/> </a></div><h1 class="message">You win!</h1><div class="custom howToPlay"> <b>How To Play:</b> Tap on boxes adjacent to the empty white box to move them around.</div><div class="custom formDiv"><div class="form"><form action="" id="game-over"><h3>You are a genius!</h3> <em>Your contact details will not be shared publicly.</em><div class="form-group"> <input type="text" name="name" id="name" class="form-control" placeholder="Full name"/></div> <input type="hidden" name="time" id="timerTicker" value="0"/> <input type="hidden" name="moves" id="movesB" value="0"/><div class="form-group"> <input type="text" name="email" id="email" class="form-control" placeholder="email"/> <span class="error">Fill details correctly!</span></div><div class="form-group"> <input type="submit" id="submit" value="send"/></div><div class="keyboard"><div class="keyboard-line"> <button class="keyboard-button">1</button> <button class="keyboard-button">2</button> <button class="keyboard-button">3</button> <button class="keyboard-button">4</button> <button class="keyboard-button">5</button> <button class="keyboard-button">6</button> <button class="keyboard-button">7</button> <button class="keyboard-button">8</button> <button class="keyboard-button">9</button> <button class="keyboard-button">0</button></div><div class="keyboard-line"> <button class="keyboard-button">q</button> <button class="keyboard-button">w</button> <button class="keyboard-button">e</button> <button class="keyboard-button">r</button> <button class="keyboard-button">t</button> <button class="keyboard-button">y</button> <button class="keyboard-button">u</button> <button class="keyboard-button">i</button> <button class="keyboard-button">o</button> <button class="keyboard-button">p</button></div><div class="keyboard-line"> <button class="keyboard-button">a</button> <button class="keyboard-button">s</button> <button class="keyboard-button">d</button> <button class="keyboard-button">f</button> <button class="keyboard-button">g</button> <button class="keyboard-button">h</button> <button class="keyboard-button">j</button> <button class="keyboard-button">k</button> <button class="keyboard-button">l</button></div><div class="keyboard-line"> <button class="keyboard-button special uppercase pos-rel"></button> <button class="keyboard-button">z</button> <button class="keyboard-button">x</button> <button class="keyboard-button">c</button> <button class="keyboard-button">v</button> <button class="keyboard-button">b</button> <button class="keyboard-button">n</button> <button class="keyboard-button">m</button> <button class="keyboard-button special backspace pos-rel"></button></div><div class="keyboard-line -last"> <button class="keyboard-button">-</button> <button class="keyboard-button">_</button> <button class="space"><div class="space-bar">Space</div> </button> <button class="keyboard-button">.</button> <button class="keyboard-button">@</button></div></div></form></div></div><div class="custom high-scores"><div class="-btn -scroll_up">scroll up</div><h3 class="scores">High Scores</h3><div class="score-card"><div class="scores-table pos-rel"><div class="pos-abs -arrow_up"></div><div class="pos-abs -arrow_down"></div><div class="-table_head"><div class="-tr"><div class="-td -number -inline_block">#</div><div class="-td -name -inline_block">Name</div><div class="-td -time -inline_block">Time</div><div class="-td -moves -inline_block">Moves</div></div></div><div id="highScoresBody" class="-table_body"></div></div></div><div class="-btn -scroll_down">scroll down</div></div><div class="feedback"></div></div>
<script src="https://www.gstatic.com/firebasejs/7.6.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.6.0/firebase-firestore.js"></script>

<script>
var Box=function(t,e){this.x=t,this.y=e};Box.prototype={getTopBox:function(){return 0===this.y?null:new Box(this.x,this.y-1)},getRightBox:function(){return 3===this.x?null:new Box(this.x+1,this.y)},getBottomBox:function(){return 3===this.y?null:new Box(this.x,this.y+1)},getLeftBox:function(){return 0===this.x?null:new Box(this.x-1,this.y)},getNextdoorBoxes:function(){return[this.getTopBox(),this.getRightBox(),this.getBottomBox(),this.getLeftBox()].filter(t=>null!==t)},getRandomNextdoorBox:function(){const t=this.getNextdoorBoxes();return t[Math.floor(Math.random()*t.length)]}};var State=function(t,e,n,o){this.grid=t,this.move=e,this.time=n,this.status=o};State.handleMove=function(){document.querySelectorAll(".grid button").forEach(t=>{var e=t.textContent;t.setAttribute("draggable",!0),t.setAttribute("ondragstart","this.click()"),e&&t.setAttribute("style","background-image:url(https://ng.jumia.is/cms/8-18/clearance-sale/puzzle/jan-14/"+e+".jpg")})},State.ready=function(){return new State([[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],0,0,"ready")},State.getRandomGrid=function(){let t=[[1,2,3,4],[5,6,7,8],[9,10,11,12],[13,14,15,0]],e=new Box(3,3);for(let n=0;n<1e3;n++){const n=e.getRandomNextdoorBox();State.swapBoxes(t,e,n),e=n}return State.isSolved(t)?State.getRandomGrid():t},State.swapBoxes=function(t,e,n){var o=t[e.y][e.x];t[e.y][e.x]=t[n.y][n.x],t[n.y][n.x]=o},State.start=function(){return new State(State.getRandomGrid(),0,0,"playing")},State.isSolved=function(t){return 1===t[0][0]&&2===t[0][1]&&3===t[0][2]&&4===t[0][3]&&5===t[1][0]&&6===t[1][1]&&7===t[1][2]&&8===t[1][3]&&9===t[2][0]&&10===t[2][1]&&11===t[2][2]&&12===t[2][3]&&13===t[3][0]&&14===t[3][1]&&15===t[3][2]&&0===t[3][3]};var Game=function(t){this.state=t,this.tickId=null,this.tick=this.tick.bind(this),this.render(),this.handleClickBox=this.handleClickBox.bind(this),this.timerTicker=document.getElementById("timerTicker"),this.form=document.querySelector("#game-over"),this.formDiv=document.querySelector(".formDiv")};Game.ready=function(){return new Game(State.ready())},Game.prototype={tick:function(){var t=parseInt(this.timerTicker.value,0);t+=1,this.timerTicker.value=t,document.getElementById("time").textContent=`Time: ${t}`},setState:function(t){this.state={...this.state,...t},this.render()},handleClickBox:function(t){return function(){const e=t.getNextdoorBoxes().find(t=>0===this.state.grid[t.y][t.x]);if(e){const n=[...this.state.grid];State.swapBoxes(n,t,e),State.isSolved(n)?(clearInterval(this.tickId),this.setState({status:"won",grid:n,move:this.state.move+1})):this.setState({grid:n,move:this.state.move+1})}}.bind(this)},newButton:function(t){var e=this,n=document.createElement("button");return n.setAttribute("draggable",!0),n.setAttribute("ondragstart","this.click()"),"ready"===t&&(n.textContent="Play"),"ready"===t&&n.setAttribute("id","playButton"),"playing"===t&&(n.textContent="Reset"),"won"===t&&(n.textContent="Play"),"won"===t&&n.setAttribute("id","playButton"),n.addEventListener("click",()=>{clearInterval(this.tickId),e.timerTicker.value=0,e.formDiv.classList.remove("active"),this.tickId=setInterval(this.tick,1e3),this.setState(State.start())}),n},render:function(){const{grid:t,move:e,status:n}=this.state,o=document.createElement("div");o.className="grid";for(let e=0;e<4;e++)for(let i=0;i<4;i++){const r=document.createElement("button"),a=document.createElement("span");"playing"===n&&r.addEventListener("click",this.handleClickBox(new Box(i,e))),a.textContent=0===t[e][i]?"":t[e][i].toString(),r.appendChild(a),o.appendChild(r)}document.querySelector(".grid").replaceWith(o);const i=this.newButton(n);document.querySelector(".footer button").replaceWith(i),document.getElementById("move").textContent=`Moves: ${e}`,document.getElementById("movesB").value=e,"won"===n?(document.querySelector(".howToPlay").style.display="none",this.formDiv.classList.add("active"),document.querySelector(".message").textContent="You win!"):(document.querySelector(".howToPlay").style.display="block",document.querySelector(".message").textContent=""),State.handleMove()}};var Main=function(){this.tbody=document.querySelector("#highScoresBody"),this.arrowUp=document.querySelector(".-arrow_up"),this.arrowDown=document.querySelector(".-arrow_down"),this.scrollUp=document.querySelector(".-scroll_up"),this.scrollDown=document.querySelector(".-scroll_down"),this.form=document.querySelector("#game-over"),this.formDiv=document.querySelector(".formDiv"),this.name=document.getElementById("name"),this.email=document.getElementById("email"),this.keyboardBtns=document.querySelectorAll(".keyboard-button:not(.special)"),this.error=document.querySelector(".error"),this.currentField="name",this.howToPlay=document.querySelector(".howToPlay"),this.firebaseConfig={apiKey:"AIzaSyAA8dQEt-yZnDyY3Lra8lndRJ3LWNYVW0o",authDomain:"jumia-c15a3.firebaseapp.com",databaseURL:"https://jumia-c15a3.firebaseio.com",projectId:"jumia-c15a3",storageBucket:"jumia-c15a3.appspot.com",messagingSenderId:"295115190934",appId:"1:295115190934:web:de0b33b53a514c3c"},this.db=null,this.interval=null,this.GAME=Game.ready(),this.qualifierEls=[]};Main.prototype={init:function(){firebase.initializeApp(this.firebaseConfig),this.db=firebase.firestore(),this.listeners()},listeners:function(){this.keyListeners(),this.dbListener(),this.scrollListener()},keyListeners:function(){var t=this;this.keyboardBtns.forEach(e=>{e.addEventListener("click",function(n){n.preventDefault();var o=e.textContent,i=t.formDiv.querySelector(".focused");i||(i=t.formDiv.querySelector("input:first-child"));var r=i.value;i.value=r+o})});var e=document.querySelectorAll('input[type="text"]');e.forEach(t=>{t.addEventListener("focus",function(){e.forEach(t=>t.classList.remove("focused")),t.classList.add("focused")})}),document.querySelector(".uppercase").addEventListener("click",function(e){e.preventDefault(),t.keyboardBtns.forEach(t=>{var e=t.textContent;e=e===e.toLowerCase()?e.toUpperCase():e.toLowerCase(),t.textContent=e})}),document.querySelector(".backspace").addEventListener("click",function(e){e.preventDefault();var n=t.formDiv.querySelector(".focused");if(n){var o=n.value;o=o.substring(0,o.length-1),n.value=o}}),document.querySelector(".space-bar").addEventListener("click",function(e){e.preventDefault();var n=t.formDiv.querySelector(".focused");n||(n=t.formDiv.querySelector("input:first-child"));var o=n.value+" ";n.value=o}),document.getElementById("submit").addEventListener("click",function(e){e.preventDefault();var n=document.getElementById("name").value,o=document.getElementById("email").value;t.validateEmail(o)&&""!=n?(t.error.classList.remove("active"),t.formDiv.classList.remove("active"),t.sendData(),t.howToPlay.style.display="block",t.howToPlay.innerHTML='<div class="success">Your record has been submitted!</div>'):t.error.classList.add("active")})},dbListener:function(){var t=this;this.db.collection("puzzle").onSnapshot(e=>{var n=[],o={};e.docChanges().forEach(t=>o=t.doc.data()),Object.keys(o).forEach(t=>n.push(o[t])),t.buildDataVisual(n)},t=>console.error(t.message))},scrollListener:function(){var t=this;t.arrowUp.classList.add("-off"),this.tbody.addEventListener("scroll",function(){var e=t.tbody.scrollHeight-t.tbody.offsetHeight==t.tbody.scrollTop,n=0==t.tbody.scrollTop,o=t.arrowUp.classList,i=t.arrowDown.classList;n?o.add("-off"):o.remove("-off"),e?i.add("-off"):i.remove("-off")}),t.scrollUp.addEventListener("click",function(e){var n=t.tbody.scrollTop-10,o=t.tbody.scrollTop-80;t.tween(n,o,500,t.easeOutQuart,t.tbody)}),t.scrollDown.addEventListener("click",function(e){var n=t.tbody.scrollTop+10,o=t.tbody.scrollTop+80;t.tween(n,o,500,t.easeOutQuart,t.tbody)})},easeOutQuart:function(t,e,n,o,i){return-o*((e=e/i-1)*e*e*e-1)+n},tween:function(t,e,n,o,i){var r,a=e-t;r=window.performance&&window.performance.now?performance.now():Date.now?Date.now():(new Date).getTime();var s=function(c){var l=c?c-r:0,u=o(null,l,0,1,n);i.scrollTop=t+a*u,l<n&&i.scrollTop!=e&&requestAnimationFrame(s)};s()},validateEmail:function(t){return/\S+@\S+\.\S+/.test(t)},appendMany2One:function(t,e){t.forEach(t=>e.appendChild(t))},setAttributes:function(t,e){Object.keys(e).forEach(n=>t.setAttribute(n,e[n]))},create:function(t){var e=t[0],n=t[1],o=t[2],i=t[3],r=document.createElement(e);return this.setAttributes(r,n),this.setAttributes(r,o),i&&(r.innerHTML=i),r},isInQualifierEls:function(t){var e=this.qualifierEls.findIndex(e=>e.getAttribute("id")===t.email);return-1!==e&&this.qualifierEls[e]},buildDataVisual:function(t){this.createOrUpdateQualifierEl(t);var e=this.sortTable(this.qualifierEls);this.appendTable(e)},isAEqualB:function(t,e){return t.getAttribute("id")===e.getAttribute("id")},appendTable:function(t){var e=this;this.tbody.innerHTML="",t.forEach(t=>e.tbody.appendChild(t))},value:function(t,e){return t.querySelector(".-"+e).textContent},sortTable:function(t){var e=this,n=[],o=t.map(t=>parseInt(e.value(t,"time")));return[...new Set(o)].sort((t,e)=>t-e).map(o=>{t.filter(t=>parseInt(e.value(t,"time"))==o).sort((t,n)=>parseInt(e.value(t,"moves"))-parseInt(e.value(n,"moves"))).forEach(t=>n.push(t))}),n.map((t,e)=>(t.querySelector(".-number").textContent=e+1,t)),n},createOrUpdateQualifierEl:function(t){var e=this;t.forEach((t,n)=>{t.number=n+1;var o=e.isInQualifierEls(t);o?e.updateEl(t,o):e.createEl(t)})},createEl:function(t){var e={tr:["div",{id:t.email,class:"-tr"},"",""],number:["div",{class:"-number -td -inline_block"},"",t.number],name:["div",{class:"-name -td -inline_block"},"",t.name],time:["div",{class:"-time -td -inline_block"},"",t.time],moves:["div",{class:"-moves -td -inline_block"},"",t.moves]},n=this.create(e.tr),o=this.create(e.number),i=this.create(e.name),r=this.create(e.time),a=this.create(e.moves);this.appendMany2One([o,i,r,a],n),this.qualifierEls.push(n)},updateEl:function(t,e){e.querySelector(".-name").textContent=t.name,e.querySelector(".-time").textContent=t.time,e.querySelector(".-moves").textContent=t.moves},sendData:function(){var t=this.db.collection("puzzle"),e={},n={name:this.form.name.value,email:this.form.email.value,moves:+this.form.moves.value,time:+this.form.time.value,date:+new Date};e[n.email]=n,t.doc("data").set(e,{merge:!0}).then(t=>console.log("sent")).catch(t=>console.log(t))}};var main=new Main;main.init();
</script>