<style type="text/css">
@import url(https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css);@import url(https://fonts.googleapis.com/css?family=Didact+Gothic|Ubuntu:300,400,500,700|Josefin+Sans:100,300,400,600,700|Poiret+One|Questrial|Roboto:100,200,300,400,500,600,700,800,900&display=swap);*,::after,::before{margin:0;padding:0;box-sizing:border-box;font-family:Roboto}:root{--width:calc(100vw/4 - 10px)}#game-over h3{color:#ce1d00}.keyboard-line.-last{margin:5px auto}.high-scores>.high-scores{margin:2px 1px}.scores-table{width:100%}.game{box-shadow:0 1px 4px rgba(0,0,0,.5);padding:15px;background-color:#ce1d00;border-radius:5px}.grid{display:grid;grid-template-columns:var(--width) var(--width) var(--width) var(--width);grid-template-rows:var(--width) var(--width) var(--width) var(--width);justify-content:center}.grid button{background-color:#cfcfcf;color:#000;font-size:24px;font-weight:700;border:1px solid #500;outline:0;cursor:pointer;background-position:center;background-size:contain}.footer{margin-top:15px;display:flex;justify-content:space-between}.footer button{border:none;font-size:20px;font-weight:700;border-radius:5px;box-shadow:0 1px 4px rgba(0,0,0,.5);padding:5px;width:80px;background-color:#d4ee9f;color:#033;outline:0;cursor:pointer}.footer button:hover{color:#d4ee9f;background-color:#033}.footer span{flex:1;text-align:center;font-size:20px;color:#d4ee9f;font-weight:700;margin:auto 0}.message{color:#aa3939;height:80px;display:none}div.form-group{padding:10px 5px}input.form-control{width:100%;border:1px solid #ce1d00;border-radius:5px;padding:10px;height:auto;font-size:14px}input.form-control:focus{border:1px solid #ce1d00}div.custom{padding:5px;font-size:14px;background:#fff;box-shadow:0 2px 2px 0 rgba(0,0,0,.2);margin:10px}input[type=submit]{background:#ce1d00;color:#fff;box-shadow:0 0 .2em #ddd;padding:10px 20px;border-radius:5px;border:none;width:50%;font-size:14px;font-weight:700}.formDiv{display:none}.keyboard-line{width:100%;display:flex;flex-flow:row nowrap;justify-content:center;margin:2px 0}div.keyboard{background:#c70039}.keyboard-button{width:calc(100vw/10);height:calc(100vw/10);color:#fff;background:0 0;border:none;box-shadow:0 0 .1em rgba(0,0,0,.6);transition:.1s}button.space{width:50vw;display:block;margin:auto;padding:10px 34px;background:0 0;border:none;box-shadow:0 0 .1em rgba(0,0,0,.6);color:#fff}div.space-bar{color:#fff;padding:2px}.highlighted{animation:highlight .1s linear}@keyframes highlight{0%{background:rgba(0,0,0,.3)}50%{background:rgba(0,0,0,.6)}100%{background:rgba(0,0,0,.3)}}#playButton{animation:colorized .1s linear}@keyframes colorized{0%{font-weight:400}50%{font-weight:700}100%{font-weight:400}}.error{color:red;font-size:10px;display:none}table.scores-table{border:none;border-spacing:0}table.scores-table tbody tr td,table.scores-table thead tr th{text-align:left;padding:3px 1px}table.scores-table thead{background:#999696;color:#000}table.scores-table tbody tr:nth-child(even){background:#f7f7f7}table.scores-table tbody tr:first-child{color:#228b22;font-weight:700}.success{color:green;font-weight:700;font-style:italic}
</style>
<div class="-container"> <div class="game"> <div class="grid"> <button>1</button> <button>2</button> <button>3</button> <button>4</button> <button>5</button> <button>6</button> <button>7</button> <button>8</button> <button>9</button> <button>10</button> <button>11</button> <button>12</button> <button>13</button> <button>14</button> <button>15</button> <button></button> </div> <div class="footer"> <button>Play</button> <span id="move">Moves:100</span> <span id="time">Time:0</span> </div> </div> <h1 class="message">You win!</h1> <div class="custom howToPlay"> <b>How To Play:</b> Tap on boxes adjacent to the empty white box to move them around. </div> <div class="custom formDiv"> <div class="form"> <form action="" id="game-over"> <h3>You are a genius!</h3> <em>Your contact details will not be shared publicly.</em> <div class="form-group"> <input type="text" name="name" id="name" class="form-control" placeholder="Full name"/> </div> <input type="hidden" name="time" id="timerTicker" value="0"/> <input type="hidden" name="moves" id="movesB" value="0"/> <div class="form-group"> <input type="text" name="phone" id="phone" class="form-control" placeholder="Phone Number"/> <span class="error">Fill details correctly!</span> </div> <div class="form-group"> <input type="submit" id="submit" value="send"/> </div> <div class="keyboard"> <div class="keyboard-line"> <button class="keyboard-button">1</button> <button class="keyboard-button">2</button> <button class="keyboard-button">3</button> <button class="keyboard-button">4</button> <button class="keyboard-button">5</button> <button class="keyboard-button">6</button> <button class="keyboard-button">7</button> <button class="keyboard-button">8</button> <button class="keyboard-button">9</button> <button class="keyboard-button">0</button> </div> <div class="keyboard-line"> <button class="keyboard-button">q</button> <button class="keyboard-button">w</button> <button class="keyboard-button">e</button> <button class="keyboard-button">r</button> <button class="keyboard-button">t</button> <button class="keyboard-button">y</button> <button class="keyboard-button">u</button> <button class="keyboard-button">i</button> <button class="keyboard-button">o</button> <button class="keyboard-button">p</button> </div> <div class="keyboard-line"> <button class="keyboard-button">a</button> <button class="keyboard-button">s</button> <button class="keyboard-button">d</button> <button class="keyboard-button">f</button> <button class="keyboard-button">g</button> <button class="keyboard-button">h</button> <button class="keyboard-button">j</button> <button class="keyboard-button">k</button> <button class="keyboard-button">l</button> </div> <div class="keyboard-line"> <button class="keyboard-button special uppercase"> <i class="fa fa-long-arrow-up"></i> </button> <button class="keyboard-button">z</button> <button class="keyboard-button">x</button> <button class="keyboard-button">c</button> <button class="keyboard-button">v</button> <button class="keyboard-button">b</button> <button class="keyboard-button">n</button> <button class="keyboard-button">m</button> <button class="keyboard-button special backspace"> <i class="fa fa-long-arrow-left"></i> </button> </div> <div class="keyboard-line -last"> <button class="space"> <div class="space-bar">Space</div> </button> </div> </div> </form> </div> </div> <div class="custom high-scores"> <h3 class="scores">High Scores</h3> <div class="score-card"> <table class="scores-table"> <thead> <tr> <th>Name</th> <th>Time</th> <th>Moves</th> </tr> </thead> <tbody id="highScoresBody"></tbody> </table> </div> </div> <div class="feedback"></div> </div>
<script src="https://jumia.co/nl-templates-egypt/uploads/201812/sizzlejsss.js" type="text/javascript">
</script>
<script src="https://www.gstatic.com/firebasejs/7.6.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.6.0/firebase-firestore.js"></script>
<script>
$(window).on("load",function(){class e{constructor(e,t){this.x=e,this.y=t}getTopBox(){return 0===this.y?null:new e(this.x,this.y-1)}getRightBox(){return 3===this.x?null:new e(this.x+1,this.y)}getBottomBox(){return 3===this.y?null:new e(this.x,this.y+1)}getLeftBox(){return 0===this.x?null:new e(this.x-1,this.y)}getNextdoorBoxes(){return[this.getTopBox(),this.getRightBox(),this.getBottomBox(),this.getLeftBox()].filter(e=>null!==e)}getRandomNextdoorBox(){const e=this.getNextdoorBoxes();return e[Math.floor(Math.random()*e.length)]}}const t=(e,t,o)=>{const i=e[t.y][t.x];e[t.y][t.x]=e[o.y][o.x],e[o.y][o.x]=i},o=e=>1===e[0][0]&&2===e[0][1]&&3===e[0][2]&&4===e[0][3]&&5===e[1][0]&&6===e[1][1]&&7===e[1][2]&&8===e[1][3]&&9===e[2][0]&&10===e[2][1]&&11===e[2][2]&&12===e[2][3]&&13===e[3][0]&&14===e[3][1]&&15===e[3][2]&&0===e[3][3],i=()=>{let n=[[1,2,3,4],[5,6,7,8],[9,10,11,12],[13,14,15,0]],a=new e(3,3);for(let e=0;e<1e3;e++){const o=a.getRandomNextdoorBox();t(n,a,o),a=o,999==e&&console.log()}return o(n)?i():n};class n{constructor(e,t,o,i){this.grid=e,this.move=t,this.time=o,this.status=i}static ready(){return new n([[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],0,0,"ready")}static start(){return new n(i(),0,0,"playing")}}class a{constructor(e){this.state=e,this.tickId=null,this.tick=this.tick.bind(this),this.render(),this.handleClickBox=this.handleClickBox.bind(this)}static ready(){return new a(n.ready())}tick(){var e=parseInt($("#timerTicker").val(),0);e+=1,$("#timerTicker").val(e),document.getElementById("time").textContent=`Time: ${e}`}setState(e){this.state={...this.state,...e},this.render()}handleClickBox(e){return function(){const i=e.getNextdoorBoxes().find(e=>0===this.state.grid[e.y][e.x]);if(i){const n=[...this.state.grid];t(n,e,i),o(n)?(clearInterval(this.tickId),this.setState({status:"won",grid:n,move:this.state.move+1})):(this.setState({grid:n,move:this.state.move+1}),r())}}.bind(this)}render(){const{grid:t,move:o,time:i,status:a}=this.state,r=document.createElement("div");r.className="grid";for(let o=0;o<4;o++)for(let i=0;i<4;i++){const n=document.createElement("button");"playing"===a&&n.addEventListener("click",this.handleClickBox(new e(i,o))),n.textContent=0===t[o][i]?"":t[o][i].toString(),r.appendChild(n)}document.querySelector(".grid").replaceWith(r);const s=document.createElement("button");if(s.setAttribute("draggable",!0),s.setAttribute("ondragstart","this.click()"),"ready"===a&&(s.textContent="Play"),"ready"===a&&s.setAttribute("id","playButton"),"playing"===a&&(s.textContent="Reset"),"won"===a&&(s.textContent="Play"),"won"===a&&s.setAttribute("id","playButton"),s.addEventListener("click",()=>{clearInterval(this.tickId),$("#timerTicker").val(0),$(".formDiv").fadeOut(300),this.tickId=setInterval(this.tick,1e3),this.setState(n.start())}),document.querySelector(".footer button").replaceWith(s),document.getElementById("move").textContent=`Moves: ${o}`,$("#movesB").val(o),"won"===a){$("movesB").val(),$("#timerTicker").val();$(".howToPlay").hide();var d=$("#name").val(),c=$("#phone").val();""!=d&&""!=c?$("#game-over").submit():$(".formDiv").fadeIn(400),document.querySelector(".message").textContent="You win!"}else document.querySelector(".message").textContent=""}}a.ready();function r(){var e=$(".grid button");$.each(e,function(e,t){var o=$(this).text();$(this).css("background-image","url(https://ke.jumia.is/cms/2019/J-PUZZLE/20th-dec/"+o+".jpg").attr("draggable",!0).attr("ondragstart","this.click()")})}setInterval(function(){r()},100),$(".keyboard-button").not(".special").click(function(e){e.preventDefault();var t=$(this).text();if($(".formDiv").find(".focused").length>0){var o=$(".formDiv").find(".focused").val();$(".formDiv").find(".focused").val(o+t)}else{$(".formDiv").find("input:first").focus();o=$(".formDiv").find(".focused").val();$(".formDiv").find(".focused").val(o+t)}}),$('input[type="text"]').focus(function(){$('input[type="text"]').each(function(){$(this).removeClass("focused")}),$(this).addClass("focused")}),$(".uppercase").click(function(e){e.preventDefault(),$(".keyboard-button").not(".special").each(function(){var e=$(this).text();e=e==e.toLowerCase()?e.toUpperCase():e.toLowerCase(),$(this).text(e)})}),$(".backspace").click(function(e){if(e.preventDefault(),$(".formDiv").find(".focused").length>0){var t=$(".formDiv").find(".focused").val();t=t.substring(0,t.length-1),$(".formDiv").find(".focused").val(t)}}),$(".space-bar").click(function(e){e.preventDefault();if($(".formDiv").find(".focused").length>0){var t=$(".formDiv").find(".focused").val();$(".formDiv").find(".focused").val(t+" ")}else{$(".formDiv").find("input:first").focus();t=$(".formDiv").find(".focused").val();$(".formDiv").find(".focused").val(t+" ")}}),$("#submit").click(function(e){e.preventDefault();$(this).val();var t=$.trim($("#name").val()),o=$.trim($("#phone").val());$("#timerTicker").val(),$("#movesB").val();10!=o.length||""==t?$(".error").fadeIn(300):(sendData(),$(".formDiv").fadeOut(300),$(".howToPlay").html('<div class="success"><i class="fa fa-check></i> Your record has been submittetd!</div>').fadeIn(500).fadeIn(500).delay(6e3).fadeOut(1200))})});var firebaseConfig={apiKey:"AIzaSyCkGV2NWnLXED0zRzfC_3X3-P23zaFm7h8",authDomain:"jumee-puzzle.firebaseapp.com",databaseURL:"https://jumee-puzzle.firebaseio.com",projectId:"jumee-puzzle",storageBucket:"jumee-puzzle.appspot.com",messagingSenderId:"159018014952",appId:"1:159018014952:web:ee88027b4e7649dfbe115d"};firebase.initializeApp(firebaseConfig);const db=firebase.firestore(),tbody=document.querySelector("#highScoresBody"),form=document.querySelector("#game-over");function buildDataVisual(e){let t=document.createElement("tr"),o=document.createElement("td"),i=document.createElement("td"),n=document.createElement("td");t.setAttribute("data-id",e.id),o.textContent=e.data().name,n.textContent=e.data().time,i.textContent=e.data().moves,t.appendChild(o),t.appendChild(n),t.appendChild(i),tbody.appendChild(t),db.collection("gamers").doc(e.id).onSnapshot({},function(e){let t=tbody.querySelector('[data-id="'+e.id+'"]'),o=document.createElement("td"),i=document.createElement("td"),n=document.createElement("td");o.textContent=e.data().name,n.textContent=e.data().time,i.textContent=e.data().moves,t.innerHTML="",t.appendChild(o),t.appendChild(n),t.appendChild(i)})}function sendData(){db.collection("gamers").where("phone","==",form.phone.value).get().then(e=>{e.docs.length>0?e.docs.forEach(e=>{e.data().time>form.time.value&&db.collection("gamers").doc(e.id).set({name:form.name.value,phone:form.phone.value,moves:+form.moves.value,time:+form.time.value,date:firebase.firestore.FieldValue.serverTimestamp()})}):db.collection("gamers").add({name:form.name.value,phone:form.phone.value,moves:+form.moves.value,time:+form.time.value,date:firebase.firestore.FieldValue.serverTimestamp()})})}db.collection("gamers").orderBy("time","asc").limit(30).onSnapshot(e=>{e.docChanges().forEach(e=>{if("added"==e.type)buildDataVisual(e.doc);else if("removed"==e.type){let t=tbody.querySelector('[data-id="'+e.doc.id+'"]');tbody.removeChild(t)}})});
</script>